# Decision Architecture: KiteOps

## Executive Summary

This document outlines the architecture for KiteOps, an intelligent, rule-based booking and management platform. The architecture is designed to be scalable, maintainable, and provide a consistent foundation for AI agent-based development. It is based on a modern, hybrid approach, leveraging a Next.js frontend, a FastAPI (Python) backend, Supabase for the database and authentication, and a set of best-in-class libraries for state management, forms, and UI components.

## Project Initialization

The first implementation story should be to initialize the project using the following command:

```bash
npx create-next-app@latest kiteops --typescript --tailwind --eslint --app --src-dir --import-alias "@/*"
```

This command establishes the base architecture with the following decisions:
*   **Framework:** Next.js (App Router)
*   **Language:** TypeScript
*   **Styling:** Tailwind CSS
*   **Linting:** ESLint
*   **Project Structure:** Code will be in a `src/` directory.

## Decision Summary

| Category | Decision | Version | Affects Epics | Rationale |
| --- | --- | --- | --- | --- |
| Frontend Framework | Next.js | 14.0 | All | Full-stack framework for React, with SSR/SSG, and a rich ecosystem. |
| Backend Framework | FastAPI | 0.120.0 | All | High-performance Python framework for building APIs. |
| Language | TypeScript | 5.3 | All | Enforces type safety, improving code quality and maintainability. |
| Styling | Tailwind CSS | 3.4 | All | Utility-first CSS framework for rapid and consistent UI development. |
| Database | Supabase | `supabase-js v2.75.1` | All | PostgreSQL-based platform with auth, storage, and real-time capabilities. |
| Authentication | Supabase Auth | `supabase-js v2.75.1` | 1, 2, 3 | Tightly integrated with the database, simplifying user management. |
| Real-time | Supabase Realtime | `supabase-js v2.75.1` | 2, 3 | Provides real-time data synchronization for a live, interactive experience. |
| State Management | TanStack Query | 5.90.5 | 2, 3 | For managing server state, caching, and data synchronization. |
| State Management | Zustand | 5.0.8 | 2, 3 | For simple, lightweight client-side state management. |
| Form Management | React Hook Form | 7.65.0 | 1, 2, 3 | Performant, flexible, and extensible forms with easy-to-use validation. |
| Form Validation | Zod | 4.1.12 | 1, 2, 3 | TypeScript-first schema validation with static type inference. |
| Email Service | Resend | 6.2.2 | 3 | Modern, developer-friendly email service for transactional emails. |
| UI Components | Shadcn/ui | N/A | 1, 2, 3 | A collection of re-usable, accessible, and customizable UI components. |

## Project Structure

```
kiteops/
├── frontend/
│   ├── src/
│   │   ├── app/
│   │   │   ├── (auth)/
│   │   │   │   ├── login/
│   │   │   │   └── register/
│   │   │   ├── (main)/
│   │   │   │   ├── dashboard/
│   │   │   │   ├── bookings/
│   │   │   │   └── schedule/
│   │   │   ├── api/
│   │   │   └── layout.tsx
│   │   ├── components/
│   │   │   ├── ui/ (Shadcn/ui components)
│   │   │   └── shared/
│   │   ├── lib/
│   │   │   ├── supabase.ts
│   │   │   ├── utils.ts
│   │   │   └── types/
│   │   ├── styles/
│   │   │   └── globals.css
│   │   └── ...
│   ├── public/
│   ├── package.json
│   ├── tsconfig.json
│   └── next.config.mjs
└── backend/
    ├── app/
    │   ├── __init__.py
    │   ├── main.py
    │   ├── core/
    │   ├── models/
    │   ├── schemas/
    │   └── services/
    ├── requirements.txt
    └── .env
```

## Technology Stack Details

### Core Technologies
*   **Frontend Framework:** Next.js 14.0
*   **Backend Framework:** FastAPI 0.120.0
*   **React:** 18.2
*   **TypeScript:** 5.3
*   **Tailwind CSS:** 3.4
*   **Supabase (JS Client):** 2.75.1
*   **TanStack Query:** 5.90.5
*   **Zustand:** 5.0.8
*   **React Hook Form:** 7.65.0
*   **Zod:** 4.1.12
*   **Resend:** 6.2.2
*   **Shadcn/ui:** N/A

## Implementation Patterns

These patterns ensure consistent implementation across all AI agents:

### Naming Conventions
*   **Components:** PascalCase (e.g., `UserCard.tsx`)
*   **Files:** kebab-case (e.g., `user-card.tsx`)
*   **API Routes:** kebab-case (e.g., `/api/user-profile`)
*   **Database Tables:** snake_case (e.g., `user_profiles`)
*   **Database Columns:** snake_case (e.g., `user_id`)

### Code Organization
*   **Components:** Organize by feature in the `src/components` directory.
*   **Shared Logic:** Place in the `src/lib` directory.
*   **Types:** Define in `src/lib/types`.

### Error Handling
*   Use a centralized error handling function.
*   Return consistent error responses from the API.

### Logging
*   Use a structured logging format.
*   Log all critical errors and events.

---

_Generated by BMAD Decision Architecture Workflow v1.0_
_Date: 2025-10-25_
_For: BIP_
